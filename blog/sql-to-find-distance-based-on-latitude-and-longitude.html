<!DOCTYPE html>
<html>

  <!--
	Twenty by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->

<head>
    <title>SQL to find distance based on latitude and longitude</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="My everyday struggles with the web">
    <meta name="keywords" content="" />
    <!--[if lte IE 8]><script src="/assets/css/ie/html5shiv.js"></script><![endif]-->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/jquery.dropotron.min.js"></script>
    <script src="/assets/js/jquery.scrolly.min.js"></script>
    <script src="/assets/js/jquery.scrollgress.min.js"></script>
    <script src="/assets/js/skel.min.js"></script>
    <script src="/assets/js/skel-layers.min.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/init.js"></script>

    <link rel="stylesheet" href="/assets/css/skel.css" />
    <link rel="stylesheet" href="/assets/css/prism.css" />
    <link rel="stylesheet" href="/assets/css/style.css" />
    <link rel="stylesheet" href="/assets/css/style-wide.css" />
    <link rel="stylesheet" href="/assets/css/style-noscript.css" />

    <!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie/v8.css" /><![endif]-->
    <!--[if lte IE 9]><link rel="stylesheet" href="/assets/css/ie/v9.css" /><![endif]-->
    <meta name="viewport" content="width=device-width">

    <link rel="canonical" href="http://locahost:4000/blog/sql-to-find-distance-based-on-latitude-and-longitude.html">
</head>


  <body class="no-sidebar">
    <div class="bgimg"></div>

    <header id="header">
	<h1 id="logo"><a href="/">blog.jason_writes_code</a></h1>
	<nav id="nav">
		<ul>
			<li><a href="/">Home</a></li>
            <!-- <li><a href="/contact.html">Contact</a></li> -->
		</ul>
	</nav>
</header>

    <div class="page-content">
        <article id="main">
  <header class="special container">
    <span class="icon sql"></span>
    <h2 class="post-title">SQL to find distance based on latitude and longitude</h2>
    <p class="post-meta">Oct 9, 2013</p>
  </header>

  <section class="style4 wrapper container">
    <p>This is a quick post, mostly so i never forget this. A guy I work with either wrote this or found it on the internet. If you have a database of addresses with lat/long pairs for each entry, this SQL statement will find the distance (I think in miles) from a given lat/long.</p>

<pre><code class="language-sql">SELECT 
    ( 3959 * acos( cos( radians(origin_lat) ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians(origin_long) ) + sin( radians(origin_lat) ) * sin( radians( latitude ) ) ) ) AS distance 
FROM
    zip_codes
HAVING
    distance &lt;= _miles
ORDER BY
    zip;
</code></pre>

  </section>

    <footer>
        
        <a href="/blog/youtube-browser-based-uploading-with-oauth.html" class="post-prev">&larr; Previous post</a> 
        
        <a href="/blog/ruby-script-for-sorting-photos-by-year-and-month.html" class="post-next">Next post &rarr;</a> 
    </footer>
</article>


    </div>
    <!-- Footer -->
<footer id="footer">

    <ul class="icons">
        <li><a href="https://www.linkedin.com/in/jasonsavage2" class="icon circle fa-linkedin" target="_blank"><span class="label">LinkedIn</span></a></li>
        <li><a href="https://plus.google.com/102994115954672547056/posts" class="icon circle fa-google-plus" target="_blank"><span class="label">Google+</span></a></li>
        <li><a href="https://github.com/jasonsavage" class="icon circle fa-github" target="_blank"><span class="label">Github</span></a></li>
    </ul>

    <ul class="copyright">
        <li>&copy;<script>document.write(new Date().getFullYear());</script> Jason Savage</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
    </ul>

</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69145232-1', 'auto');
  ga('send', 'pageview');
</script>


  </body>

</html>
